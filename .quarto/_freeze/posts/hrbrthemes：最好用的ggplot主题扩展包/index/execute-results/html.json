{
  "hash": "4b730db31de6edf7574889daaa2f2502",
  "result": {
    "markdown": "---\ntitle: \"hrbrthemes：最好用的 ggplot 主题扩展包\"\nauthor: \"Boyce\"\ndate: \"2023/02/25\"\ncategories: [R, ggplot2]\n---\n\n\n## 背景介绍\n\nggplot 好用归好用，但是默认主题给人的感觉还是过于呆板，一直想找一个比较美观的 ggplot 主题拓展包。\n\n恰好看到 [Awesome ggplot2](https://github.com/erikgahner/awesome-ggplot2) 有收集 ggplot 的主题拓展，遂逐一尝试了一下。\n\n经过筛选，发现只有 `hrbrthemes` 满足自己的要求：第一，风格简约，足够美观；第二，语法与 ggplot2 保持一致，符合使用习惯。\n\n\n## 使用方法\n\n::: {.cell}\n\n```{.r .cell-code}\n# 包引入\nlibrary(tidyverse)\nlibrary(hrbrthemes)\nlibrary(datasets)\nlibrary(patchwork) #控制多张图表的位置摆放\n```\n:::\n\n\n使用 `datasets package` 内置的 airquality 数据集来做测试。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::kable(head(airquality))\n```\n\n::: {.cell-output-display}\n| Ozone| Solar.R| Wind| Temp| Month| Day|\n|-----:|-------:|----:|----:|-----:|---:|\n|    41|     190|  7.4|   67|     5|   1|\n|    36|     118|  8.0|   72|     5|   2|\n|    12|     149| 12.6|   74|     5|   3|\n|    18|     313| 11.5|   62|     5|   4|\n|    NA|      NA| 14.3|   56|     5|   5|\n|    28|      NA| 14.9|   66|     5|   6|\n:::\n:::\n\n\n### 内置主题函数\n\n::: {.cell}\n\n```{.r .cell-code}\n# ggplot默认主题作图\nplot1 <- airquality %>%\n  ggplot(aes(x = Wind, y = Temp)) +\n  geom_point()\n\n# 使用hrbrthemes的默认主题作图\nplot2 <- airquality %>%\n  ggplot(aes(x = Wind, y = Temp)) +\n  geom_point() +\n  theme_ipsum()\n\n# 将两张图并列对比\nplot1 + plot2\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n通过比较可以发现，`theme_ipsum` 将默认的背景色去掉了，并对横轴和纵轴的图例做了处理：将其字体变小，并将位置从中心处挪到边沿处。整体上变得更加简约和美观。\n\n使用 `?theme_ipsum` 可以进一步看到该主题的内置参数，挑选几个比较重要的参数展示一下。\n\n1、`grid` 控制网格，默认是保留X轴和Y轴的网格，如需改变，可以直接使用 `grid = ''` 删除网格，或者使用 `grid = 'X'` 只保留X轴的网格。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nairquality %>%\n  ggplot(aes(x = Wind, y = Temp)) +\n  geom_point() +\n  theme_ipsum(grid = 'X')\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n2、`axis` 控制横纵轴的起始轴线，默认是删除的，如果需要保留，使用方法和 `grid` 类似：\n\n::: {.cell}\n\n```{.r .cell-code}\nairquality %>%\n  ggplot(aes(x = Wind, y = Temp)) +\n  geom_point() +\n  theme_ipsum(axis = 'XY')\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n3、使用 `base_family` 控制字体。英文的主题风格，中文如果直接使用默认字体，效果一般不好。经过测试，苹果系统使用华文细黑 `STXihei` 字体的效果比较好。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nairquality %>%\n  ggplot(aes(x = Wind, y = Temp)) +\n  geom_point() +\n  labs(title = '散点图', x = '风速', y = '温度') +\n  theme_ipsum(base_family = 'STXihei')\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n4、除了以上参数，`theme_ipsum` 主题函数还可以设置如下参数：标题 `plot_title_`、副标题 `subtitle_`、分面标题 `strip_text_`、注释 `caption_`、横纵坐标值 `axis_title_`等。\n\n\n5、除了 `theme_ipsum`，还有 `theme_ipsum_es()`、`theme_tinyhand()`、`theme_ft_rc()` 等主题风格。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot3 <- airquality %>%\n  ggplot(aes(x = Wind, y = Temp)) +\n  geom_point() +\n  labs(title = '散点图', x = '风速', y = '温度') +\n  theme_ft_rc(base_family = 'STXihei')\n\nplot4 <- airquality %>%\n  ggplot(aes(x = Wind, y = Temp)) +\n  geom_point() +\n  labs(title = '散点图', x = '风速', y = '温度') +\n  theme_ipsum_rc(base_family = 'STXihei')\n\nplot3 + plot4\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n### 内置色彩系统\n\nhrbrthemes 也内置了色彩系统，方便直接调用。例如 `scale_color_ipsum()` 和 `scale_color_ft()`：\n\n\n::: {.cell}\n\n```{.r .cell-code}\np5 <- airquality %>%\n  mutate(Month = as.factor(Month)) %>%\n  ggplot(aes(x = Wind, y = Temp)) +\n  geom_point(aes(color = Month)) +\n  scale_color_ipsum() +\n  theme_ipsum()\n\np6 <- airquality %>%\n  mutate(Month = as.factor(Month)) %>%\n  ggplot(aes(x = Wind, y = Temp)) +\n  geom_point(aes(color = Month)) +\n  scale_color_ft() +\n  theme_ipsum()\n\np5 + p6\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n也可以使用 `ipsum_pal()` 和 `ft_pal()` 直接返回颜色编码字符串。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nscales::show_col(ipsum_pal()(9))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n\n```{.r .cell-code}\nscales::show_col(ft_pal()(9))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-2.png){width=672}\n:::\n:::\n\n\n\n## 相关资源\n\n* [hrbrthemes Github page](https://github.com/hrbrmstr/hrbrthemes)\n\n* [Man pages for hrbrthemes](https://rdrr.io/github/hrbrmstr/hrbrthemes/man/)",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}